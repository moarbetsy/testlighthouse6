<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- 
  SECURITY TODO: Move to Production
  1. The current CSP uses 'unsafe-inline' to ensure this single file works immediately.
  2. To achieve 100/100 Best Practices, you must calculate the hash of the script at the bottom:
     Command: echo -n "EXACT_SCRIPT_CONTENT" | openssl dgst -sha384 -binary | openssl base64
  3. Replace 'unsafe-inline' with 'sha384-YOUR_CALCULATED_HASH'
  -->
  <meta http-equiv="Content-Security-Policy" 
        content="default-src 'self'; 
                 script-src 'self' 'unsafe-inline'; 
                 style-src 'self' 'unsafe-inline'; 
                 img-src 'self' data: https:; 
                 font-src 'self'; 
                 connect-src 'self'; 
                 base-uri 'self'; 
                 form-action 'self'">

  <!-- SEO Meta Tags -->
  <title>Lighthouse+ | Instant Website Performance & SEO Audit</title>
  <meta name="description" content="Get a comprehensive website rating in seconds. Lighthouse+ analyzes performance, accessibility, best practices, and SEO with actionable insights.">
  <link rel="canonical" href="https://example.com/lighthouse-plus">
  
  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Lighthouse+ | Website Auditor">
  <meta property="og:description" content="Check your website score instantly. Free performance and SEO analysis tool.">
  <meta property="og:url" content="https://example.com/lighthouse-plus">
  <meta property="og:image" content="https://example.com/og-image.jpg">

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Lighthouse+",
    "description": "Web performance and SEO auditing tool",
    "applicationCategory": "DeveloperApplication",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>

  <style>
    /* 
     * CRITICAL CSS 
     * Methodology: BEM-ish, CSS Variables for theming
     */
    :root {
      /* Palette - Accessible Contrast Verified */
      --primary: #2563eb; /* Blue 600 */
      --primary-hover: #1d4ed8; /* Blue 700 */
      --text-main: #1f2937; /* Gray 800 */
      --text-muted: #4b5563; /* Gray 600 */
      --bg-surface: #ffffff;
      --bg-subtle: #f3f4f6; /* Gray 100 */
      --border: #e5e7eb; /* Gray 200 */
      
      /* Score Colors */
      --score-good: #16a34a; /* Green 600 */
      --score-avg: #ca8a04; /* Yellow 600 */
      --score-poor: #dc2626; /* Red 600 */

      /* Spacing */
      --container: 1200px;
    }

    /* Reset & Base */
    *, *::before, *::after { box-sizing: border-box; }
    
    body {
      margin: 0;
      font-family: system-ui, -apple-system, sans-serif;
      color: var(--text-main);
      background: var(--bg-surface);
      line-height: 1.5;
    }

    /* Accessibility Utilities */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }

    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: var(--text-main);
      color: white;
      padding: 8px 16px;
      z-index: 100;
      text-decoration: none;
      transition: top 0.2s;
    }
    .skip-link:focus { top: 0; }

    :focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    /* Layout */
    .container {
      width: 90%;
      max-width: var(--container);
      margin: 0 auto;
    }

    /* Header */
    header {
      border-bottom: 1px solid var(--border);
      padding: 1rem 0;
    }
    
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--text-main);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .logo svg { width: 24px; height: 24px; fill: var(--primary); }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 4rem 0 6rem;
      background: var(--bg-subtle);
    }

    .hero h1 {
      font-size: clamp(2rem, 5vw, 3.5rem);
      margin-bottom: 1rem;
      line-height: 1.1;
    }

    .hero p {
      font-size: 1.25rem;
      color: var(--text-muted);
      max-width: 600px;
      margin: 0 auto 3rem;
    }

    /* Analysis Form */
    .audit-form {
      max-width: 600px;
      margin: 0 auto;
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .input-group {
      flex: 1;
      min-width: 280px;
      display: flex;
      flex-direction: column;
      text-align: left;
    }

    .input-group label {
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--text-main);
    }

    input[type="url"] {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid var(--border);
      border-radius: 6px;
      font-size: 1rem;
      transition: border-color 0.2s;
    }

    input[type="url"]:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
    }

    button.btn-primary {
      padding: 0.75rem 1.5rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      align-self: flex-end; /* Align with input box */
      min-height: 48px; /* Touch target size */
      transition: background 0.2s;
    }

    button.btn-primary:hover { background: var(--primary-hover); }
    button.btn-primary:disabled { background: var(--text-muted); cursor: not-allowed; }

    /* Results Section (Hidden initially) */
    #results-area {
      display: none; /* Toggled via JS */
      padding: 4rem 0;
      scroll-margin-top: 2rem;
    }

    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .score-card {
      background: white;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 2rem;
      text-align: center;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .gauge {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: conic-gradient(var(--score-color) var(--percentage), #e5e7eb 0);
      margin: 0 auto 1.5rem;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .gauge::before {
      content: '';
      position: absolute;
      width: 100px;
      height: 100px;
      background: white;
      border-radius: 50%;
    }

    .gauge-value {
      position: relative;
      font-size: 2rem;
      font-weight: 800;
      color: var(--text-main);
    }

    .score-card h3 {
      margin: 0;
      font-size: 1.125rem;
      color: var(--text-muted);
    }

    /* Loading State */
    .loader {
      display: none;
      width: 48px;
      height: 48px;
      border: 5px solid var(--border);
      border-bottom-color: var(--primary);
      border-radius: 50%;
      animation: rotation 1s linear infinite;
      margin: 2rem auto;
    }

    @keyframes rotation {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
      .loader { animation-duration: 3s; }
      * { transition-duration: 0.01ms !important; }
    }

    /* Footer */
    footer {
      border-top: 1px solid var(--border);
      padding: 2rem 0;
      margin-top: 4rem;
      text-align: center;
      color: var(--text-muted);
    }
  </style>
</head>
<body>

  <!-- WCAG Requirement: Skip Link -->
  <a href="#main" class="skip-link">Skip to main content</a>

  <header>
    <div class="container header-content">
      <a href="/" class="logo">
        <!-- Inline SVG Logo -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2L2 22h20L12 2zm0 3.5L18.5 20H5.5L12 5.5z"/><path d="M11 9h2v6h-2zm0 8h2v2h-2z"/></svg>
        Lighthouse+
      </a>
      <nav aria-label="Main">
        <!-- Simple nav for semantic structure -->
      </nav>
    </div>
  </header>

  <main id="main">
    <section class="hero" aria-labelledby="hero-heading">
      <div class="container">
        <h1 id="hero-heading">Measure your website's health</h1>
        <p>Enter a URL to generate a comprehensive audit of performance, accessibility, and SEO.</p>
        
        <form id="auditForm" class="audit-form" novalidate>
          <div class="input-group">
            <label for="url-input">Website URL</label>
            <input 
              type="url" 
              id="url-input" 
              name="url" 
              placeholder="https://example.com" 
              required
              aria-describedby="url-hint"
            >
          </div>
          <button type="submit" class="btn-primary" id="submit-btn">
            Run Audit
          </button>
        </form>
        <p id="url-hint" class="sr-only">Enter a valid URL starting with http or https</p>
        
        <!-- Live Region for Screen Reader Feedback -->
        <div id="status-message" role="status" aria-live="polite" class="sr-only"></div>
        
        <div class="loader" id="loader"></div>
      </div>
    </section>

    <!-- Results Section -->
    <section id="results-area" aria-labelledby="results-heading">
      <div class="container">
        <h2 id="results-heading" style="text-align: center; margin-bottom: 2rem;">Audit Report</h2>
        <p id="target-url-display" style="text-align: center; color: var(--text-muted); margin-bottom: 2rem;"></p>
        
        <div class="results-grid">
          
          <!-- Performance -->
          <article class="score-card">
            <div class="gauge" data-score="92" style="--score-color: var(--score-good); --percentage: 0%;">
              <span class="gauge-value">0</span>
            </div>
            <h3>Performance</h3>
          </article>

          <!-- Accessibility -->
          <article class="score-card">
            <div class="gauge" data-score="100" style="--score-color: var(--score-good); --percentage: 0%;">
              <span class="gauge-value">0</span>
            </div>
            <h3>Accessibility</h3>
          </article>

          <!-- Best Practices -->
          <article class="score-card">
            <div class="gauge" data-score="85" style="--score-color: var(--score-avg); --percentage: 0%;">
              <span class="gauge-value">0</span>
            </div>
            <h3>Best Practices</h3>
          </article>

          <!-- SEO -->
          <article class="score-card">
            <div class="gauge" data-score="100" style="--score-color: var(--score-good); --percentage: 0%;">
              <span class="gauge-value">0</span>
            </div>
            <h3>SEO</h3>
          </article>

        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>&copy; 2024 Lighthouse+ Demo. All rights reserved.</p>
    </div>
  </footer>

  <!-- Application Logic -->
  <script defer>
    // Safe DOM elements selection
    const form = document.getElementById('auditForm');
    const input = document.getElementById('url-input');
    const loader = document.getElementById('loader');
    const resultsArea = document.getElementById('results-area');
    const submitBtn = document.getElementById('submit-btn');
    const statusMsg = document.getElementById('status-message');
    const targetUrlDisplay = document.getElementById('target-url-display');

    // Utility: Validate URL
    function isValidUrl(string) {
      try {
        new URL(string);
        return true;
      } catch (_) {
        return false;
      }
    }

    // Utility: Animate Numbers
    function animateValue(obj, start, end, duration) {
      let startTimestamp = null;
      const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
        const currentVal = Math.floor(progress * (end - start) + start);
        
        // Update text
        obj.querySelector('.gauge-value').textContent = currentVal;
        
        // Update Conic Gradient
        const color = currentVal >= 90 ? 'var(--score-good)' : 
                      currentVal >= 50 ? 'var(--score-avg)' : 
                      'var(--score-poor)';
        
        obj.style.setProperty('--score-color', color);
        obj.style.setProperty('--percentage', `${currentVal}%`);

        if (progress < 1) {
          window.requestAnimationFrame(step);
        }
      };
      window.requestAnimationFrame(step);
    }

    form.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const url = input.value.trim();

      // Basic Validation
      if (!url || !isValidUrl(url)) {
        alert('Please enter a valid URL (e.g., https://example.com)');
        input.focus();
        return;
      }

      // 1. UI State: Loading
      loader.style.display = 'block';
      resultsArea.style.display = 'none';
      submitBtn.disabled = true;
      statusMsg.textContent = `Analyzing ${url}, please wait...`;

      // 2. Simulate Network Request (SetTimeout)
      setTimeout(() => {
        // Hide loader
        loader.style.display = 'none';
        submitBtn.disabled = false;
        
        // Show Results
        resultsArea.style.display = 'block';
        targetUrlDisplay.textContent = `Report for: ${url}`;
        
        // Accessibility focus management
        resultsArea.focus(); // Ensure container has tabindex="-1" via JS if needed, or focus header
        document.getElementById('results-heading').scrollIntoView({ behavior: 'smooth' });
        statusMsg.textContent = "Analysis complete. Results displayed below.";

        // Animate Gauges (Simulation)
        const gauges = document.querySelectorAll('.gauge');
        gauges.forEach(gauge => {
          // Generate random realistic scores for demo
          // First one (Performance) gets slightly random
          // Others get fixed for "Success" look
          let score = parseInt(gauge.dataset.score); 
          if(gauge.parentElement.querySelector('h3').textContent === 'Performance') {
             score = Math.floor(Math.random() * (100 - 80) + 80); // Random 80-100
          }
          
          // Reset
          gauge.style.setProperty('--percentage', '0%');
          gauge.querySelector('.gauge-value').textContent = '0';
          
          // Trigger Animation
          animateValue(gauge, 0, score, 1500);
        });

      }, 2000); // 2 second fake delay
    });
  </script>
</body>
</html>
